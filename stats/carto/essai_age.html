<html>
  <head>
      <meta charset="utf-8">
    <title>Carte sur l'âge des bâtiments au Havre</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=visualization"></script>
    <script>
      // Données
      var map, pointarray, heatmap, map1, geocoder, adress; 

      var Logements = [
        new google.maps.LatLng(49.51952250, 0.11028360),
        new google.maps.LatLng(49.52645140, 0.12057110),
        new google.maps.LatLng(49.51952250, 0.11028360),
        new google.maps.LatLng(49.50958940, 0.09169150),
        new google.maps.LatLng(49.51971570, 0.09257050),
        new google.maps.LatLng(49.51983700, 0.09262700),
		new google.maps.LatLng(49.51931930, 0.09385940),
		new google.maps.LatLng(49.51931190, 0.09385760),
        new google.maps.LatLng(49.51929710, 0.09385410),
        new google.maps.LatLng(49.51928970, 0.09385240),
        new google.maps.LatLng(49.51915120, 0.09490940),
        new google.maps.LatLng(49.51911310, 0.09511810),
        new google.maps.LatLng(49.51934180, 0.09386610),
        new google.maps.LatLng(49.51930370, 0.09407480),
        new google.maps.LatLng(49.51922750, 0.09449210),
        new google.maps.LatLng(49.51928970, 0.09385240),
        new google.maps.LatLng(49.51909640, 0.09511080),
        new google.maps.LatLng(49.51932510, 0.09385880),
        new google.maps.LatLng(49.51928970, 0.09385240),
        new google.maps.LatLng(49.51911540, 0.09511710),
        new google.maps.LatLng(49.51938300, 0.09510050),
        new google.maps.LatLng(49.51966440, 0.09512010),
        new google.maps.LatLng(49.51994390, 0.09521170),
        new google.maps.LatLng(49.52019630, 0.09539430),
        new google.maps.LatLng(49.52084140, 0.07841990),
        new google.maps.LatLng(49.52080460, 0.07861890),
        new google.maps.LatLng(49.52076830, 0.07881870),
        new google.maps.LatLng(49.52073480, 0.07901900),
        new google.maps.LatLng(49.52131580, 0.08474550),
        new google.maps.LatLng(49.52190700, 0.08533100),
        new google.maps.LatLng(49.52131580, 0.08474550),
        new google.maps.LatLng(49.52190700, 0.08533100),
        new google.maps.LatLng(49.52131580, 0.08474550),
        new google.maps.LatLng(49.51887540, 0.09143040),
        new google.maps.LatLng(49.51887540, 0.09143040),
        new google.maps.LatLng(49.51956820, 0.09179310),
        new google.maps.LatLng(49.51887540, 0.09143040),
        new google.maps.LatLng(49.51956820, 0.09179310),
        new google.maps.LatLng(49.51814160, 0.09251330),
        new google.maps.LatLng(49.51954770, 0.09187210),
        new google.maps.LatLng(49.51913780, 0.09246160),
        new google.maps.LatLng(49.51843340, 0.09204130),
        new google.maps.LatLng(49.51847040, 0.09388560),
        new google.maps.LatLng(49.51954770, 0.09187210),
        new google.maps.LatLng(49.51913780, 0.09246160),
        new google.maps.LatLng(49.51843340, 0.09204130),
        new google.maps.LatLng(49.51512350, 0.09222220),
        new google.maps.LatLng(49.51509740, 0.09236410),
        new google.maps.LatLng(49.51520170, 0.09179650),
        new google.maps.LatLng(49.51523040, 0.09150250),
        new google.maps.LatLng(49.51519710, 0.09168360),
        new google.maps.LatLng(49.51520170, 0.09179650),
        new google.maps.LatLng(49.51516380, 0.09186470),
        new google.maps.LatLng(49.51517560, 0.09193840),
        new google.maps.LatLng(49.51514960, 0.09208030),
        new google.maps.LatLng(49.51524960, 0.09149520),
        new google.maps.LatLng(49.51538820, 0.09157750),
        new google.maps.LatLng(49.51552570, 0.09166480),
        new google.maps.LatLng(49.51566130, 0.09175800),
        new google.maps.LatLng(49.51906110, 0.09422570),
        new google.maps.LatLng(49.51847560, 0.09393660),
        new google.maps.LatLng(49.51803210, 0.09433360),
        new google.maps.LatLng(49.51724760, 0.09446480),
        new google.maps.LatLng(49.51754350, 0.09447940),
        new google.maps.LatLng(49.51510990, 0.10081350),
        new google.maps.LatLng(49.51537370, 0.09950410),
        new google.maps.LatLng(49.51531150, 0.09982390),
        new google.maps.LatLng(49.51524920, 0.10014380),
        new google.maps.LatLng(49.51518350, 0.10046240),
        new google.maps.LatLng(49.51511690, 0.10078020),
        new google.maps.LatLng(49.50820220, 0.10213700),
        new google.maps.LatLng(49.51302370, 0.09644230),
        new google.maps.LatLng(49.51531740, 0.09441200),
        new google.maps.LatLng(49.51569100, 0.09251040),
        new google.maps.LatLng(49.51563150, 0.09282390),
        new google.maps.LatLng(49.51557200, 0.09313750),
        new google.maps.LatLng(49.51551250, 0.09345100),
        new google.maps.LatLng(49.51575050, 0.09219680),
        new google.maps.LatLng(49.51563150, 0.09282390),
        new google.maps.LatLng(49.51579180, 0.09186400),
        new google.maps.LatLng(49.52655010, 0.11083670),
        new google.maps.LatLng(49.52630890, 0.11145640),
        new google.maps.LatLng(49.52617740, 0.11027400),
        new google.maps.LatLng(49.52930900, 0.10812750),
        new google.maps.LatLng(49.52285190, 0.11488650),
        new google.maps.LatLng(49.52930500, 0.10909790),
        new google.maps.LatLng(49.52078240, 0.10574880),
        new google.maps.LatLng(49.52073250, 0.10813590),
        new google.maps.LatLng(49.52079550, 0.10808700),
        new google.maps.LatLng(49.52087440, 0.10572770),
        new google.maps.LatLng(49.52102800, 0.10791640),
        new google.maps.LatLng(49.52023290, 0.10590180),
        new google.maps.LatLng(49.52144510, 0.10715270),
        new google.maps.LatLng(49.52095160, 0.10558460),
        new google.maps.LatLng(49.52076960, 0.10577890),
        new google.maps.LatLng(49.52083550, 0.10688500),
        new google.maps.LatLng(49.52059840, 0.10579100),
        new google.maps.LatLng(49.52085440, 0.10671400),
        new google.maps.LatLng(49.52096050, 0.10563410),
        new google.maps.LatLng(49.52050640, 0.10581200),
        new google.maps.LatLng(49.52023290, 0.10590180),
        new google.maps.LatLng(49.52066230, 0.10739660),
        new google.maps.LatLng(49.52065490, 0.10743820),
        new google.maps.LatLng(49.52095160, 0.10558460),
        new google.maps.LatLng(49.52050270, 0.10782040),
        new google.maps.LatLng(49.52099580, 0.10767920),
        new google.maps.LatLng(49.52114480, 0.10742850),
        new google.maps.LatLng(49.52047510, 0.10630510),
        new google.maps.LatLng(49.52049830, 0.10653720),
        new google.maps.LatLng(49.52057380, 0.10672760),
        new google.maps.LatLng(49.52071530, 0.10681480),
        new google.maps.LatLng(49.52062940, 0.10700060),
        new google.maps.LatLng(49.52087440, 0.10572770),
        new google.maps.LatLng(49.52063650, 0.10714680),
        new google.maps.LatLng(49.52050950, 0.10745440),
        new google.maps.LatLng(49.52053140, 0.10761180),
        new google.maps.LatLng(49.52045040, 0.10771400),
        new google.maps.LatLng(49.52039750, 0.10794930),
        new google.maps.LatLng(49.52060290, 0.10820590),
		new google.maps.LatLng(49.52090670, 0.10597810),
        new google.maps.LatLng(49.52059840, 0.10579100),
        new google.maps.LatLng(49.52125660, 0.10734310),
        new google.maps.LatLng(49.52121250, 0.10706830),
        new google.maps.LatLng(49.52087700, 0.10575430),
        new google.maps.LatLng(49.52023030, 0.10587520),
        new google.maps.LatLng(49.52089180, 0.10574910),
        new google.maps.LatLng(49.52076960, 0.10577890),
        new google.maps.LatLng(49.52104280, 0.10763120),
        new google.maps.LatLng(49.52096050, 0.10563410),
        new google.maps.LatLng(49.52110170, 0.10748780),
        new google.maps.LatLng(49.52091840, 0.10704650),
        new google.maps.LatLng(49.52072410, 0.10682160),
        new google.maps.LatLng(49.52058350, 0.10726080),
        new google.maps.LatLng(49.52050950, 0.10745440),
        new google.maps.LatLng(49.52089180, 0.10574910),
        new google.maps.LatLng(49.52043060, 0.10775030),
        new google.maps.LatLng(49.52053210, 0.10805160),
        new google.maps.LatLng(49.52980150, 0.11631880),
        new google.maps.LatLng(49.52994360, 0.11723110),
        new google.maps.LatLng(49.52994720, 0.11741190),
		new google.maps.LatLng(49.52977670, 0.11818430),
        new google.maps.LatLng(49.52944150, 0.11908210),
        new google.maps.LatLng(49.52977690, 0.11836520),
        new google.maps.LatLng(49.52977730, 0.11872690),
        new google.maps.LatLng(49.52975100, 0.11831300),
        new google.maps.LatLng(49.52966050, 0.11925540),
        new google.maps.LatLng(49.52943700, 0.11874340),
        new google.maps.LatLng(49.52376870, 0.11237470),
        new google.maps.LatLng(49.52439480, 0.11181930),
        new google.maps.LatLng(49.52467500, 0.11137770),
        new google.maps.LatLng(49.52549210, 0.11345390),
        new google.maps.LatLng(49.52491150, 0.11104190),
        new google.maps.LatLng(49.52525580, 0.11068710),
        new google.maps.LatLng(49.52577450, 0.11030480),
        new google.maps.LatLng(49.52576860, 0.11035370),
        new google.maps.LatLng(49.52510760, 0.11079280),
        new google.maps.LatLng(49.52493750, 0.11106710),
        new google.maps.LatLng(49.52520600, 0.11068040),
        new google.maps.LatLng(49.52541720, 0.11049620),
        new google.maps.LatLng(49.52564350, 0.11035890),
        new google.maps.LatLng(49.52576160, 0.11030940),
		new google.maps.LatLng(49.51978390, 0.11226130),
        new google.maps.LatLng(49.50560100, 0.09637230),
        new google.maps.LatLng(49.51837760, 0.09068120),
        new google.maps.LatLng(49.51802560, 0.08960850),
        new google.maps.LatLng(49.51768850, 0.08963970),
        new google.maps.LatLng(49.51825830, 0.08995100),
        new google.maps.LatLng(49.51078140, 0.09084540),
        new google.maps.LatLng(49.51079790, 0.09086950),
        new google.maps.LatLng(49.51078140, 0.09084540),
        new google.maps.LatLng(49.51088400, 0.09001650),
        new google.maps.LatLng(49.51078140, 0.09084540),
        new google.maps.LatLng(49.51038350, 0.09069730),
        new google.maps.LatLng(49.51026040, 0.09073110),
        new google.maps.LatLng(49.51168050, 0.09490920),
        new google.maps.LatLng(49.51180490, 0.09494870),
        new google.maps.LatLng(49.51143510, 0.09481710),
        new google.maps.LatLng(49.51155600, 0.09486970),
        new google.maps.LatLng(49.51281520, 0.09423790),
        new google.maps.LatLng(49.51295730, 0.09428210)		
      ];

	 //Centre de la carte
      function initialize() {
        var mapOptions = {
          zoom: 11,
          center: new google.maps.LatLng(49.54403690, 0.13247040),
          mapTypeId: google.maps.MapTypeId.SATELLITE
        };

//pour affichage données		
function initialize1() {
  map1 = new GMap2(document.getElementById("map_canvas"));
  map1.setCenter(new GLatLng(49.54403690, 0.13247040), 11);
  map1.addControl(new GLargeMapControl);
  GEvent.addListener(map1, "click", getAddress);
  geocoder = new GClientGeocoder();
}

  	    map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
	
        pointArray = new google.maps.MVCArray(Logements);

        heatmap = new google.maps.visualization.HeatmapLayer({
          data: pointArray
        });

        heatmap.setMap(map);
     }

//affichage données	 
function getAddress(overlay, latlng) {
  if (latlng != null) {
    address = latlng;
    geocoder.getLocations(latlng, showAddress);
  }
}
//affichage données
function showAddress(response) {
  map1.clearOverlays();
  if (!response || response.Status.code != 200) {
    alert("Status Code:" + response.Status.code);
  } else {
    place = response.Placemark[0];
    point = new GLatLng(place.Point.coordinates[1],
                        place.Point.coordinates[0]);
    marker = new GMarker(point);
    map1.addOverlay(marker);
    marker.openInfoWindowHtml(
    '<b>orig latlng:</b>' + response.name + '<br/>' + 
    '<b>Latitude-Longitude:</b>' + place.Point.coordinates[1] + "," + place.Point.coordinates[0] + '<br>' +
    '<b>Addresse:</b>' + place.address + '<br>' +
    '<b>Code du Pays:</b> ' + place.AddressDetails.Country.CountryNameCode);
  }
}

      function toggleHeatmap() {
        heatmap.setMap(heatmap.getMap() ? null : map);
      }
	
	//couleurs
      function changeGradient() {
        var gradient = [
          'rgba(0, 255, 255, 0)',
          'rgba(0, 255, 255, 1)',
          'rgba(0, 191, 255, 1)',
          'rgba(0, 127, 255, 1)',
          'rgba(0, 63, 255, 1)',
          'rgba(0, 0, 255, 1)',
          'rgba(0, 0, 223, 1)',
          'rgba(0, 0, 191, 1)',
          'rgba(0, 0, 159, 1)',
          'rgba(0, 0, 127, 1)',
          'rgba(63, 0, 91, 1)',
          'rgba(127, 0, 63, 1)',
          'rgba(191, 0, 31, 1)',
          'rgba(255, 0, 0, 1)'
        ]
        heatmap.setOptions({
          gradient: heatmap.get('gradient') ? null : gradient
        });
      }

      function changeRadius() {
        heatmap.setOptions({radius: heatmap.get('radius') ? null : 20});
      }

      function changeOpacity() {
        heatmap.setOptions({opacity: heatmap.get('opacity') ? null : 0.2});
      }

	


    </script>
  </head>

  <body onload="initialize()" onload="initialise1()">
    <div id="map_canvas" style="height: 700px; width: 900px;"></div>
    <button onclick="toggleHeatmap()">Affichage logements</button>
    <button onclick="changeGradient()">Change couleur</button>
    <button onclick="changeRadius()">Change épaisseur</button>
    <button onclick="changeOpacity()">Change opacité</button>
  </body>
</html>
