<?xml version="1.0" encoding="utf-8"?>
<!--
 Licensed under the Apache License, Version 2.0:
    http://www.apache.org/licenses/LICENSE-2.0
todo :

-->
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
				xmlns:ns2="compo.*"
				xmlns:form="compo.form.*"
				width="100%" height="100%" creationComplete="login()" layout="absolute"
				name="gevu_diagnostic" xmlns:stat="compo.stat.*" >
	<mx:Style source="styles.css" />	
	<mx:Script>
		<![CDATA[
			
			
			
			
		]]>
	</mx:Script>
	
	
	<mx:Script source="diagScript.as"/>

	<mx:RemoteObject id="roDiagnostique"
					 destination="zend"
					 source="GEVU_Diagnostique"
					 fault="faultHandlerService(event, 'GEVU - Diagnostic');"
					 showBusyCursor="true"
					 >
		<mx:method name="getNodeRelatedData"	result="displayNodeProperties(event);" />
		<mx:method name="getXmlNode"	result="updateTreeStructure(event);" />
		<mx:method name="findLieu"	result="displayReponse(event);" />
		<mx:method name="editLieu"	result="lieuxEdit_resultHandler(event);" />
	</mx:RemoteObject>
	
	<mx:Panel title="GEVU - Diagnostic - 0.201" id="boxGen" visible="false" width="100%" height="100%">
	 	<mx:HBox width="100%">
	 		<mx:Label text="Diagnostic(s) disponible(s) : " />
			<mx:ComboBox id="cbBases" labelField="lib" prompt="Choisissez un diagnostic" change="cbBases_changeHandler(event)" />
			<mx:CheckBox visible="true" label="Forcer le calcul" id="cbForceCalcul" change="ForceCalcul()" selected="false" />
	 	    <mx:LinkButton visible="false" label="Nettoyer la carte" click="PurgeCarte()"/>
	 	</mx:HBox>
	 	<mx:HDividedBox width="100%" height="100%">
				<mx:Canvas label="TERRITOIRES" width="30%" height="100%" id="cnvTerre" enabled="false">
					<mx:VBox width="100%" height="100%">
						<mx:Panel title="Trouver un territoire" width="100%" borderColor="#080808" 
								  paddingBottom="3" paddingLeft="3" paddingRight="3" paddingTop="3">
							<mx:HBox width="100%">
								<mx:Label text="Recherche un libellÃ© :" /><mx:TextInput id="txtFind" width="100%" /><mx:Button id="btnFind" label="Trouver" click="btnFind_clickHandler(event)" />
							</mx:HBox>
							<mx:HBox width="100%">
								<mx:Label text="Recherche un identifiant :" /><mx:TextInput id="idFind" width="100%" /><mx:Button id="btnFindId" label="Trouver" click="btnFind_clickHandler(event)" />
							</mx:HBox>
							<mx:LinkButton id="btnShowAll" label="Afficher tous les noeuds" click="btnShowAll_clickHandler(event)" />
							<mx:HBox width="100%" maxHeight="180"  >
								<mx:VBox id="FindId" maxHeight="180" width="100%" borderStyle="solid"
										 borderThickness="2">
								</mx:VBox>
								<mx:VBox id="FindLib" maxHeight="180" width="100%" borderStyle="solid"
										 borderThickness="2">
								</mx:VBox>
							</mx:HBox>
						</mx:Panel>
				 		<mx:Panel title="Choisissez un territoire" width="100%" height="100%" borderColor="#080808">
							<mx:Tree id="treeTree" labelField="@lib" iconField="@icon" showRoot="false"
									 height="100%"  width="100%" 
									 itemOpening="treeItemOpened( event );"
									 change="treeItemClicked( event );"
									 horizontalScrollPolicy="on" verticalScrollPolicy="on"
									  itemEditEnd="treeTree_itemEditEndHandler(event)"
									 editable="true"
									 />
				 		</mx:Panel>
					</mx:VBox>
				</mx:Canvas>
				 
		   <mx:VBox id="boxDiag" width="100%" height="100%" >
			   <ns2:ariane id="bbAriane" width="100%" />
			   <form:geos id="geo" width="100%" NodeData="{dataGeo}" />
			   <ns2:cnvIFCarto id="cartoIF" rsCarto="{dataGeo}" height="300" />
			   <mx:HBox width="100%">
				   <ns2:cnvCarto id="carto" rsCarto="{dataGeo}" height="300" />
				   <stat:cnvStatDiag id="stat" rsEtatDiag="{dataStat}" />
			   </mx:HBox>
			   
			   <!--
			   <mx:TabNavigator id="tabDiag" width="100%" height="100%" >
			   </mx:TabNavigator>
			   -->
			   <mx:HBox id="tabDiag" width="100%" height="100%" >
			   </mx:HBox>				
		   </mx:VBox>  
	
		</mx:HDividedBox> 
	 </mx:Panel>

</mx:Application>